はい、承知いたしました。アップロードいただいた2つのぷよぷよ連鎖シミュレーターの構成ファイルを分析し、フィールドコードの仕様を解析しました。

エンコード処理の仕様を中心に、その前後のデータ構造も併せて解説します。

---

## 1. puyop.com のシミュレーター

こちらのシミュレーターは、フィールドの各マスを1文字に対応させる、シンプルで固定長のエンコード方式を採用しています。

### 概要
- **エンコード方式:** **直接マッピング（固定長）**
- **フィールド走査順:** **列優先（縦方向）**
- **コード長:** 78文字（6列 × 13段）で固定

### 内部データ表現 (エンコード前)
- **データ構造:** 8列 × 14段 の2次元配列 `data[x][y]` でフィールドを管理しています。
- **有効範囲:** 実際に使用されるのは、`x`が`1`〜`6`（列）、`y`が`1`〜`13`（段）の範囲です。
- **インデックス:** `data[列][段]` の形式でアクセスされます。

### ぷよの種類と内部値
JavaScriptファイル(`index.htm`内に記述)で定義されている数値とぷよの対応は以下の通りです。

| 内部値 | ぷよの種類 |
| :--- | :--- |
| `0` | ブランク（空白） |
| `1` | あかぷよ |
| `2` | みどりぷよ |
| `3` | あおぷよ |
| `4` | きいろぷよ |
| `5` | むらさきぷよ |
| `6` | おじゃまぷよ |

### フィールドコード仕様 (エンコード後)
- **形式:** 78文字の文字列。
- **構成:** 1文字目がフィールドの(1,1)、2文字目が(1,2)...13文字目が(1,13)、14文字目が(2,1)という順で、**列優先**で文字が連結されます。
- **文字マッピング:**

| 文字 | ぷよの種類 |
| :--- | :--- |
| `_` | ブランク（空白） |
| `R` | あかぷよ |
| `G` | みどりぷよ |
| `B` | あおぷよ |
| `Y` | きいろぷよ |
| `P` | むらさきぷよ |
| `O` | おじゃまぷよ |

### エンコード/デコード処理
- **エンコード (`getCode`関数):** `data`配列を列優先（`x`が1→6、`y`が1→13）で走査し、各マスの内部値を対応する文字に変換して連結します。
- **デコード (`setCode`関数):** 78文字のコードを1文字ずつ読み込み、対応する数値に変換して`data`配列に列優先で格納します。

---

## 2. pndsng.com のシミュレーター

こちらは、同じ種類のぷよが連続する場合にその数を付加する、**連長圧縮（Run-Length Encoding, RLE）**を採用しており、可変長のコードを生成します。

### 概要
- **エンコード方式:** **連長圧縮（RLE、可変長）**
- **フィールド走査順:** **行優先（横方向）**
- **コード長:** フィールドの状態によって変動

### 内部データ表現 (エンコード前)
- **データ構造:** 13段 × 6列 の2次元配列 `map[y][x]` でフィールドを管理しています (`Field.js`で定義)。
- **有効範囲:** `y`が`0`〜`12`（段）、`x`が`0`〜`5`（列）の全範囲が使用されます。
- **インデックス:** `map[段][列]` の形式でアクセスされます。

### ぷよの種類と内部値
`Encode.js`で定義されている定数とぷよの対応は以下の通りです。puyop.comとは値の割り当てが異なります。

| 内部値 | ぷよの種類 |
| :--- | :--- |
| `11` | BLANK（空白） |
| `0` | RED（あか） |
| `1` | BLUE（あお） |
| `2` | YELLOW（きいろ）|
| `3` | GREEN（みどり）|
| `4` | PURPLE（むらさき）|
| `5` | OZYAMA（おじゃま）|
| `6` | TOKUTEN（得点） |
| `7` | KATAPUYO（かたぷよ）|
| `8` | BLACK（黒） |
| `9` | BLOCK（ブロック）|

### フィールドコード仕様 (エンコード後)
- **形式:** 連長圧縮された可変長の文字列。
- **構成:**
    - フィールドを**行優先**（(0,0), (0,1)...(0,5), (1,0)...）で走査します。
    - 同じ種類のぷよが続く場合、`[文字][連続回数]` の形式で圧縮されます。例えば、あかぷよ(`b`)が10個続くと `b10` となります。
    - 連続が1回の場合は、回数を省略して文字のみとなります。
- **文字マッピング (`Encode.js`より):**

| 文字 | ぷよの種類 |
|:--- | :--- |
| `a` | BLANK |
| `b` | RED |
| `c` | BLUE |
| `d` | YELLOW |
| `e` | GREEN |
| `f` | PURPLE |
| `g` | OZYAMA |
| `h` | BLACK |
| `i` | BLOCK |
| `j` | TOKUTEN |
| `k` | KATAPUYO |

### エンコード/デコード処理
- **エンコード (`encode`関数):** `map`配列を行優先で走査し、同じ文字が続けばカウンタを増やし、違う文字に変わった時点で「前の文字＋連続回数（1でなければ）」をコードに追加します。
- **デコード (`decode`関数):** エンコードされた文字列を解析し、`a`や`b10`のような部分を元のぷよの並びに展開して`map`配列を再構築します。
- **互換デコード:** `Field.js`の`load`関数には、`pndsng.com`のRLE形式とは別に、「イノセン堂」と呼ばれる別のシミュレーター（数字`0`〜`8`で構成されるコード）のデコード処理も互換性のために実装されています。

---

## 3. 2つのシミュレーターの仕様比較

| 項目 | puyop.com | pndsng.com |
| :--- | :--- | :--- |
| **内部データ配列** | `data[列][段]` | `map[段][列]` |
| **フィールド次元** | 6列 × 13段 | 6列 × 13段 |
| **内部値の定義** | 0:空白, 1:赤, 2:緑, 3:青... | 11:空白, 0:赤, 1:青, 2:黄... |
| **エンコード方式** | 直接マッピング | **連長圧縮 (RLE)** |
| **コード長** | **固定長 (78文字)** | **可変長** |
| **フィールド走査順**| **列優先** (縦方向) | **行優先** (横方向) |
| **担当JSファイル** | `index.htm` 内に記述 | `Encode.js`, `Field.js` |
| **その他** | 仕様はシンプル | 多様なぷよに対応。旧式コードの互換デコード機能あり。 |