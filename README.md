# ぷよぷよプログラミング一式実装
このリポジトリは、SEGAとMonaca Educationで協賛されているプログラミング学習教材を指示通りに実装したものです。
## 注意事項
コード内容や画像リソースはSEGAによりライセンスが管理されているため、GithubではPublicにできません。  
PrivateリポジトリではCursorなど、リポジトリを読みに行けるAIサービスを使えないかもしれないです。
## 資料一覧
[公式ホームページ](https://puyo.sega.jp/program_2020/)
[プログラムコードの全文教本](https://puyo.sega.jp/program_2020/dl/puyo-programming-code.pdf)
[プログラミング学習小冊子](https://puyo.sega.jp/program_2020/dl/puyo-programming-booklet.pdf)
## ライセンス
SEGA
Monaca Education

## プログラム内容の改修に関するルール
* コメント文章やコメントアウトされたコードをファイル内容から消去することは厳格に禁ずる。
* コードの内容を変更する場合、変更前のコードをコメントアウトなどで厳密に保持すること。
* コードの変更、追加、削除などの操作は、手を加えた部分が明確になるようにコメント処理をする。

## ぷよぷよステージ表示のサイズ調整
Cursorによる調整箇所の案内をここに記す。
### 🔧 今後の表示サイズ調整が必要な場合の調整箇所案内
ローカルGITに同期した後で、さらなる表示サイズ調整が必要になった場合は、以下の箇所を修正してください：

1. メインのサイズ調整
ファイル: src/config.js 行: 11行目
```js
// 現在: 0.97（3%縮小）
Config.puyoImgHeight = (window.innerHeight-Config.fontHeight)/Config.stageRows * 0.97

// さらに縮小したい場合の例:
// 5%縮小: * 0.95
// 7%縮小: * 0.93
// 拡大したい場合の例:
// 2%拡大: * 1.02
```
2. NEXTエリアのサイズ調整
ファイル: index.html 行: 40-41行目
```js
<!-- 現在: 78px -->
<div id="next-puyo-1" style="width: 78px; height: 78px;">
<div id="next-puyo-2" style="width: 78px; height: 78px;">

<!-- 調整例: 
     さらに小さく → 75px
     少し大きく → 80px -->
```
3. NEXTぷよ内の位置調整
ファイル: src/nextpuyo.js 行: 73-83行目
```js
// 現在の設定
centerPuyoImg.style.left = '19px';
centerPuyoImg.style.top = '39px';
movablePuyoImg.style.left = '19px';

// 調整指針:
// NEXTエリアを75pxにした場合: left = '17px', top = '37px'
// NEXTエリアを80pxにした場合: left = '20px', top = '40px'
// 計算式: (新しいサイズ / 78) × 現在の値
```
4. フォントサイズの調整（必要に応じて）
ファイル: src/config.js 行: 6行目
```js
Config.fontHeight = 33; // スコア表示エリアの高さ

// 小さくしたい場合: 30
// 大きくしたい場合: 36
```
### 🎯 調整の目安
* 縮小が必要: 係数を0.95, 0.93, 0.90など小さくする
* 拡大が必要: 係数を1.00, 1.03, 1.05など大きくする
* NEXTエリア: メインサイズに比例させるか、独立して調整
* 位置調整: NEXTエリアサイズに比例させる


これで、必要に応じて細かな調整が可能です！

## プログラムの改修履歴
プログラムコードの全文教本からファイル作成した本リポジトリを基礎コードとして、改修を行った履歴を記録する。
* Ver.1.0
    * 基礎コードでのプログラム作成と初期コミット
* Ver.1.1
    * NEXTぷよ（次に出現するピース）の告知表示機能を追加
    * NEXTぷよの表示場所: 盤面右側
    * NEXTぷよの表示数: 二つ先のピースまで表示
    * 追加・修正ファイル：
      - index.html: NEXTぷよ表示エリアの追加
      - src/nextpuyo.js: NEXTぷよ管理クラスの新規作成
      - src/game.js: NEXTぷよ初期化処理の追加
      - src/player.js: NEXTぷよシステムとの連携処理の追加
* Ver.1.2
    * 操作キーの機能変更と新規追加
    * 操作キーの機能変更: 上矢印キー（↑）を回転からぷよピースの落下ストップ機能に変更
    * 新規キー操作の追加: ぷよピースの回転方向操作キーを追加
      - Aキー: 左回り（反時計回り）回転
      - Dキー: 右回り（時計回り）回転
    * 上矢印キーでストップ中でも回転操作が可能
    * 修正ファイル：
      - src/player.js: キー操作処理の全面改修
* Ver.1.3
    * ウェブページ背景と盤面背景の視覚的区切り分けとスコア表示位置の修正
    * 視覚的区切りの追加：
      - ウェブページ背景色を薄いグレー（#f0f0f0）に変更
      - 盤面エリアを白い背景で囲み、濃い枠と影を追加
      - 盤面自体にも枠を追加して明確な区切りを作成
      - NEXTぷよエリアにも背景色と角丸枠を追加
    * スコア表示位置の修正：
      - 盤面とNEXTエリアを含む全体レイアウトを見直し
      - スコアを盤面コンテナの下に適切に配置
      - スコア表示も独立した枠付きエリアとして表示
    * 修正ファイル：
      - index.html: HTMLレイアウトの全面改修
      - src/stage.js: スコア表示位置設定の調整
* Ver.1.4
    * 盤面表示サイズの調整
    * 盤面全体の表示サイズを3%縮小（0.97倍）：
      - ページの縦範囲を短縮してスクロールなしでスコア表示を確認可能にする
      - 盤面のぷよサイズを3%縮小
      - NEXTぷよエリアのサイズも連動して調整（80px → 78px）
      - NEXTぷよ内の表示位置も比例調整
    * RaigingHeartsによるさらなる調整：
      * 盤面全体の表示サイズ「3%縮小（0.97倍）」から0.85倍へさらに縮小した
      * 教本内の初期コード全文からCursorによる改修を経たコンフィグ内の計算設定から推測し、おそらく初期コードデフォルトの表示サイズであろう倍率数値をコンフィグの変更箇所コメントに記載した。
      * NEXTぷよの表示位置を微調整（MovablePuyo（上にあるぷよ）left:15 top:0）（centerpuyo（下にあるぷよ）left:15 top:30）
    * 修正ファイル：
      - src/config.js: 盤面サイズの計算式を調整
      - index.html: NEXTエリアの固定サイズ調整
      - src/nextpuyo.js: NEXTぷよ表示位置の調整
* Ver.1.5
    * 幽霊ぷよ（ゴーストピース）機能の追加
    * 幽霊ぷよ機能の実装：
      - 現在操作中のぷよピースが着地するであろう位置を予測表示
      - 透過した見た目（透明度30%）で着地点にぷよピースを表示
      - リアルタイムでの位置更新（移動・回転・落下に連動）
      - ピース確定時の自動削除
    * 技術的な実装：
      - 落下シミュレーション計算による着地点予測
      - 障害物検知と衝突判定
      - 透明度設定による視覚的な区別
    * 修正ファイル：
      - src/config.js: 幽霊ぷよの透明度設定を追加
      - src/player.js: 幽霊ぷよ機能の全面実装
      - index.html: バージョン表示の更新
* ＜以下、改修された履歴を追記する＞
